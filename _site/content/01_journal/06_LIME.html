<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.333">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Arash Amiririgi">
<title>MyLabJournal - Explaining Black-Box Models With LIME</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../assets/icons/favicon.svg" rel="icon" type="image/svg+xml">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script src="../../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script><link href="../../site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="../../site_libs/pagedtable-1.1/js/pagedtable.js"></script>
</head>
<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg navbar-dark "><div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">MyLabJournal</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
<li class="nav-item">
    <a class="nav-link" href="../../index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-journal" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Journal</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-journal">
<li>
    <a class="dropdown-item" href="../../content/01_journal/01_Fundamentals.html" rel="" target="">
 <span class="dropdown-text">01 Machine Learning Fundamentals</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/01_journal/02_Regression.html" rel="" target="">
 <span class="dropdown-text">02 Supervised ML - Regression</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/01_journal/03_H2O_I.html" rel="" target="">
 <span class="dropdown-text">03 Automated Machine Learning with H2O (I)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/01_journal/04_H2O_II.html" rel="" target="">
 <span class="dropdown-text">04 Automated Machine Learning with H2O (II)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/01_journal/05_Performance_Measures.html" rel="" target="">
 <span class="dropdown-text">05 Performance Measures</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/01_journal/06_LIME.html" rel="" target="">
 <span class="dropdown-text">06 Explaining Black-Box Models With LIME</span></a>
  </li>  
    </ul>
</li>
  <li class="nav-item">
    <a class="nav-link" href="../../content/02_notes/05_class_notes.html" rel="" target="">
 <span class="menu-text">Class notes</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../content/03_other/06_links.html" rel="" target="">
 <span class="menu-text">Links</span></a>
  </li>  
</ul>
<div class="quarto-navbar-tools ms-auto">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title">Explaining Black-Box Models With LIME</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Arash Amiririgi </p>
          </div>
  </div>
    
  
    
  </div>
  

</header><p><strong>Challenge:</strong> IBM has gathered information on employee satisfaction, income, seniority and some demographics. It includes the data of 1470 employees. In this regard, we are going to Visualize feature importance for a single and multiple explanation.</p>
<p><em>Code:</em></p>
<section id="loading-libraries" class="level3"><h3 class="anchored" data-anchor-id="loading-libraries">Loading Libraries</h3>
<div class="cell" data-hash="06_LIME_cache/html/unnamed-chunk-1_f5af13b7d5bb0973569e28a2c94964db">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="fu">library</span>(h2o)</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="fu">library</span>(recipes)</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="fu">library</span>(readxl)</span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="fu">library</span>(tidymodels)</span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="fu">library</span>(tidyquant)</span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="fu">library</span>(lime)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="loading-data" class="level3"><h3 class="anchored" data-anchor-id="loading-data">Loading data</h3>
<div class="cell" data-hash="06_LIME_cache/html/unnamed-chunk-2_b911fe10f6cd9550e15aea84d2fcce3f">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>employee_attrition_tbl <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"Employee_Attrition.csv"</span>)</span>
<span id="cb2-2"><a href="#cb2-2"></a>definitions_raw_tbl <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"data_definitions.xlsx"</span>,</span>
<span id="cb2-3"><a href="#cb2-3"></a>                                  <span class="at">sheet =</span> <span class="dv">1</span>, <span class="at">col_names =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="processing-pipeline" class="level3"><h3 class="anchored" data-anchor-id="processing-pipeline">Processing Pipeline</h3>
<div class="cell" data-hash="06_LIME_cache/html/unnamed-chunk-3_8e8ff8c8b2f88f30279411a5f8f92c7e">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="fu">source</span>(<span class="st">"00_Scripts/data_processing_pipeline.R"</span>)</span>
<span id="cb3-2"><a href="#cb3-2"></a>employee_attrition_readable_tbl <span class="ot">&lt;-</span> <span class="fu">process_hr_data_readable</span>(employee_attrition_tbl, definitions_raw_tbl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="assign-training-and-test-data" class="level3"><h3 class="anchored" data-anchor-id="assign-training-and-test-data">Assign training and test data</h3>
<div class="cell" data-hash="06_LIME_cache/html/unnamed-chunk-4_676055a7450dac0c92cdfd98a30b84fc">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="co"># set.seed(seed = 1113)</span></span>
<span id="cb4-2"><a href="#cb4-2"></a>split_obj <span class="ot">&lt;-</span> rsample<span class="sc">::</span><span class="fu">initial_split</span>(employee_attrition_readable_tbl, <span class="at">prop =</span> <span class="fl">0.85</span>)</span>
<span id="cb4-3"><a href="#cb4-3"></a>train_readable_tbl <span class="ot">&lt;-</span> <span class="fu">training</span>(split_obj)</span>
<span id="cb4-4"><a href="#cb4-4"></a>test_readable_tbl  <span class="ot">&lt;-</span> <span class="fu">testing</span>(split_obj)</span>
<span id="cb4-5"><a href="#cb4-5"></a>recipe_obj <span class="ot">&lt;-</span> <span class="fu">recipe</span>(Attrition <span class="sc">~</span> ., <span class="at">data =</span> train_readable_tbl) <span class="sc">%&gt;%</span></span>
<span id="cb4-6"><a href="#cb4-6"></a>                <span class="fu">step_zv</span>(<span class="fu">all_predictors</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb4-7"><a href="#cb4-7"></a>                <span class="fu">step_mutate_at</span>(<span class="fu">c</span>(<span class="st">"JobLevel"</span>, <span class="st">"StockOptionLevel"</span>), <span class="at">fn =</span> as.factor) <span class="sc">%&gt;%</span> </span>
<span id="cb4-8"><a href="#cb4-8"></a>                <span class="fu">prep</span>()</span>
<span id="cb4-9"><a href="#cb4-9"></a>train_tbl <span class="ot">&lt;-</span> <span class="fu">bake</span>(recipe_obj, <span class="at">new_data =</span> train_readable_tbl)</span>
<span id="cb4-10"><a href="#cb4-10"></a>test_tbl  <span class="ot">&lt;-</span> <span class="fu">bake</span>(recipe_obj, <span class="at">new_data =</span> test_readable_tbl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="models" class="level3"><h3 class="anchored" data-anchor-id="models">Models</h3>
<div class="cell" data-hash="06_LIME_cache/html/unnamed-chunk-5_5c609137b34f17eba0a796c0a5d69f1c">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="fu">h2o.init</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt;  Connection successful!
#&gt; 
#&gt; R is connected to the H2O cluster: 
#&gt;     H2O cluster uptime:         2 hours 21 minutes 
#&gt;     H2O cluster timezone:       Europe/Berlin 
#&gt;     H2O data parsing timezone:  UTC 
#&gt;     H2O cluster version:        3.40.0.4 
#&gt;     H2O cluster version age:    1 month and 17 days 
#&gt;     H2O cluster name:           H2O_started_from_R_arash_zrw498 
#&gt;     H2O cluster total nodes:    1 
#&gt;     H2O cluster total memory:   2.72 GB 
#&gt;     H2O cluster total cores:    16 
#&gt;     H2O cluster allowed cores:  16 
#&gt;     H2O cluster healthy:        TRUE 
#&gt;     H2O Connection ip:          localhost 
#&gt;     H2O Connection port:        54321 
#&gt;     H2O Connection proxy:       NA 
#&gt;     H2O Internal Security:      FALSE 
#&gt;     R Version:                  R version 4.2.3 (2023-03-15 ucrt)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>split_h2o <span class="ot">&lt;-</span> <span class="fu">h2o.splitFrame</span>(<span class="fu">as.h2o</span>(train_tbl), <span class="at">ratios =</span> <span class="fu">c</span>(<span class="fl">0.85</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; 
  |                                                                            
  |                                                                      |   0%
  |                                                                            
  |======================================================================| 100%</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>train_h2o <span class="ot">&lt;-</span> split_h2o[[<span class="dv">1</span>]]</span>
<span id="cb9-2"><a href="#cb9-2"></a>valid_h2o <span class="ot">&lt;-</span> split_h2o[[<span class="dv">2</span>]]</span>
<span id="cb9-3"><a href="#cb9-3"></a>test_h2o  <span class="ot">&lt;-</span> <span class="fu">as.h2o</span>(test_tbl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; 
  |                                                                            
  |                                                                      |   0%
  |                                                                            
  |======================================================================| 100%</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>y <span class="ot">&lt;-</span> <span class="st">"Attrition"</span></span>
<span id="cb11-2"><a href="#cb11-2"></a>x <span class="ot">&lt;-</span> <span class="fu">setdiff</span>(<span class="fu">names</span>(train_h2o), y)</span>
<span id="cb11-3"><a href="#cb11-3"></a></span>
<span id="cb11-4"><a href="#cb11-4"></a>automl_models_h2o <span class="ot">&lt;-</span> <span class="fu">h2o.automl</span>(</span>
<span id="cb11-5"><a href="#cb11-5"></a>  <span class="at">x =</span> x,</span>
<span id="cb11-6"><a href="#cb11-6"></a>  <span class="at">y =</span> y,</span>
<span id="cb11-7"><a href="#cb11-7"></a>  <span class="at">training_frame    =</span> train_h2o,</span>
<span id="cb11-8"><a href="#cb11-8"></a>  <span class="at">validation_frame  =</span> valid_h2o,</span>
<span id="cb11-9"><a href="#cb11-9"></a>  <span class="at">leaderboard_frame =</span> test_h2o,</span>
<span id="cb11-10"><a href="#cb11-10"></a>  <span class="at">max_runtime_secs  =</span> <span class="dv">30</span>,</span>
<span id="cb11-11"><a href="#cb11-11"></a>  <span class="at">nfolds            =</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; 
  |                                                                            
  |                                                                      |   0%
  |                                                                            
  |===                                                                   |   4%
#&gt; 09:23:38.967: User specified a validation frame with cross-validation still enabled. Please note that the models will still be validated using cross-validation only, the validation frame will be used to provide purely informative validation metrics on the trained models.
#&gt; 09:23:38.974: AutoML: XGBoost is not available; skipping it.
  |                                                                            
  |=========                                                             |  12%
  |                                                                            
  |==============                                                        |  20%
  |                                                                            
  |====================                                                  |  28%
  |                                                                            
  |======================                                                |  31%
  |                                                                            
  |==========================                                            |  38%
  |                                                                            
  |===============================                                       |  45%
  |                                                                            
  |====================================                                  |  52%
  |                                                                            
  |=========================================                             |  59%
  |                                                                            
  |==============================================                        |  66%
  |                                                                            
  |====================================================                  |  74%
  |                                                                            
  |=========================================================             |  81%
  |                                                                            
  |==============================================================        |  88%
  |                                                                            
  |===================================================================   |  95%
  |                                                                            
  |======================================================================| 100%</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a>models <span class="ot">&lt;-</span> automl_models_h2o<span class="sc">@</span>leaderboard <span class="sc">%&gt;%</span> <span class="fu">as_tibble</span>()</span>
<span id="cb13-2"><a href="#cb13-2"></a>models</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["model_id"],"name":[1],"type":["chr"],"align":["left"]},{"label":["auc"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["logloss"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["aucpr"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["mean_per_class_error"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["rmse"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["mse"],"name":[7],"type":["dbl"],"align":["right"]}],"data":[{"1":"DeepLearning_grid_2_AutoML_7_20230615_92338_model_2","2":"0.8392677","3":"0.3781520","4":"0.5811093","5":"0.2384470","6":"0.3513504","7":"0.1234471"},{"1":"StackedEnsemble_BestOfFamily_4_AutoML_7_20230615_92338","2":"0.8311869","3":"0.3766594","4":"0.6325561","5":"0.2345960","6":"0.3401738","7":"0.1157182"},{"1":"GLM_1_AutoML_7_20230615_92338","2":"0.8285354","3":"0.3791537","4":"0.6514807","5":"0.2563131","6":"0.3396186","7":"0.1153408"},{"1":"StackedEnsemble_AllModels_1_AutoML_7_20230615_92338","2":"0.8256313","3":"0.3848003","4":"0.6280539","5":"0.2211490","6":"0.3422748","7":"0.1171520"},{"1":"StackedEnsemble_AllModels_3_AutoML_7_20230615_92338","2":"0.8252525","3":"0.3803528","4":"0.6182182","5":"0.2152146","6":"0.3415526","7":"0.1166582"},{"1":"StackedEnsemble_BestOfFamily_1_AutoML_7_20230615_92338","2":"0.8239899","3":"0.3853117","4":"0.6284821","5":"0.2428662","6":"0.3426841","7":"0.1174324"},{"1":"StackedEnsemble_BestOfFamily_2_AutoML_7_20230615_92338","2":"0.8239899","3":"0.3855349","4":"0.6285686","5":"0.2428662","6":"0.3426353","7":"0.1173989"},{"1":"StackedEnsemble_BestOfFamily_3_AutoML_7_20230615_92338","2":"0.8209596","3":"0.3866982","4":"0.6258613","5":"0.2537247","6":"0.3416759","7":"0.1167424"},{"1":"StackedEnsemble_AllModels_2_AutoML_7_20230615_92338","2":"0.8189394","3":"0.3890148","4":"0.6100399","5":"0.2426136","6":"0.3440890","7":"0.1183972"},{"1":"DeepLearning_grid_1_AutoML_7_20230615_92338_model_1","2":"0.8178030","3":"0.5194631","4":"0.5922914","5":"0.2358586","6":"0.3747624","7":"0.1404469"},{"1":"DeepLearning_grid_1_AutoML_7_20230615_92338_model_4","2":"0.8157828","3":"0.4247358","4":"0.6129010","5":"0.2648359","6":"0.3536984","7":"0.1251025"},{"1":"GBM_grid_1_AutoML_7_20230615_92338_model_12","2":"0.8095960","3":"0.4108962","4":"0.5353061","5":"0.2539773","6":"0.3577640","7":"0.1279951"},{"1":"GBM_grid_1_AutoML_7_20230615_92338_model_16","2":"0.8032828","3":"0.4092277","4":"0.5561525","5":"0.2601641","6":"0.3587353","7":"0.1286910"},{"1":"GBM_grid_1_AutoML_7_20230615_92338_model_7","2":"0.8022727","3":"0.4113677","4":"0.5444091","5":"0.2270833","6":"0.3602067","7":"0.1297488"},{"1":"GBM_grid_1_AutoML_7_20230615_92338_model_11","2":"0.7967172","3":"0.4181621","4":"0.5382879","5":"0.2457071","6":"0.3617756","7":"0.1308816"},{"1":"DeepLearning_1_AutoML_7_20230615_92338","2":"0.7965909","3":"0.4415267","4":"0.5856481","5":"0.2513889","6":"0.3512883","7":"0.1234034"},{"1":"DeepLearning_grid_1_AutoML_7_20230615_92338_model_3","2":"0.7955808","3":"0.4650139","4":"0.5564335","5":"0.2493056","6":"0.3680326","7":"0.1354480"},{"1":"GBM_grid_1_AutoML_7_20230615_92338_model_17","2":"0.7914141","3":"0.4123699","4":"0.5895711","5":"0.2790404","6":"0.3562768","7":"0.1269332"},{"1":"GBM_grid_1_AutoML_7_20230615_92338_model_20","2":"0.7897727","3":"0.4323030","4":"0.5166933","5":"0.2464646","6":"0.3683726","7":"0.1356984"},{"1":"GBM_1_AutoML_7_20230615_92338","2":"0.7857323","3":"0.4280962","4":"0.5245705","5":"0.2351010","6":"0.3647337","7":"0.1330307"},{"1":"GBM_grid_1_AutoML_7_20230615_92338_model_9","2":"0.7854798","3":"0.4210540","4":"0.5064571","5":"0.2539773","6":"0.3645084","7":"0.1328663"},{"1":"GBM_4_AutoML_7_20230615_92338","2":"0.7849747","3":"0.4394024","4":"0.4878879","5":"0.2386995","6":"0.3738139","7":"0.1397368"},{"1":"GBM_grid_1_AutoML_7_20230615_92338_model_2","2":"0.7847222","3":"0.4392621","4":"0.5122115","5":"0.2433712","6":"0.3716083","7":"0.1380927"},{"1":"GBM_grid_1_AutoML_7_20230615_92338_model_3","2":"0.7820707","3":"0.4242271","4":"0.5315787","5":"0.2655934","6":"0.3618768","7":"0.1309549"},{"1":"GBM_grid_1_AutoML_7_20230615_92338_model_18","2":"0.7816919","3":"0.4310308","4":"0.4653940","5":"0.2823864","6":"0.3688633","7":"0.1360601"},{"1":"GBM_grid_1_AutoML_7_20230615_92338_model_10","2":"0.7777778","3":"0.4247608","4":"0.5234710","5":"0.2635101","6":"0.3637643","7":"0.1323245"},{"1":"GBM_3_AutoML_7_20230615_92338","2":"0.7752525","3":"0.4392542","4":"0.4731117","5":"0.2826389","6":"0.3705766","7":"0.1373270"},{"1":"GBM_grid_1_AutoML_7_20230615_92338_model_19","2":"0.7726010","3":"0.4661211","4":"0.5037916","5":"0.2878157","6":"0.3791563","7":"0.1437595"},{"1":"GBM_grid_1_AutoML_7_20230615_92338_model_21","2":"0.7720960","3":"0.4496712","4":"0.4466843","5":"0.2392045","6":"0.3769440","7":"0.1420867"},{"1":"GBM_grid_1_AutoML_7_20230615_92338_model_5","2":"0.7695707","3":"0.5228326","4":"0.4439613","5":"0.2756313","6":"0.4011685","7":"0.1609361"},{"1":"GBM_grid_1_AutoML_7_20230615_92338_model_1","2":"0.7642677","3":"0.4584151","4":"0.4257996","5":"0.2621843","6":"0.3841341","7":"0.1475590"},{"1":"GBM_grid_1_AutoML_7_20230615_92338_model_4","2":"0.7602273","3":"0.4496368","4":"0.4604328","5":"0.2795455","6":"0.3728261","7":"0.1389993"},{"1":"DeepLearning_grid_1_AutoML_7_20230615_92338_model_2","2":"0.7534091","3":"0.5606895","4":"0.4889783","5":"0.2789773","6":"0.3845732","7":"0.1478965"},{"1":"DRF_1_AutoML_7_20230615_92338","2":"0.7527778","3":"0.4398019","4":"0.4560320","5":"0.2867424","6":"0.3731786","7":"0.1392622"},{"1":"GBM_2_AutoML_7_20230615_92338","2":"0.7517677","3":"0.4623308","4":"0.4554302","5":"0.3229798","6":"0.3798608","7":"0.1442942"},{"1":"GBM_grid_1_AutoML_7_20230615_92338_model_6","2":"0.7491162","3":"0.4496711","4":"0.4620329","5":"0.3020202","6":"0.3747161","7":"0.1404122"},{"1":"GBM_grid_1_AutoML_7_20230615_92338_model_14","2":"0.7443182","3":"0.4777540","4":"0.4680983","5":"0.3100379","6":"0.3836785","7":"0.1472092"},{"1":"GBM_grid_1_AutoML_7_20230615_92338_model_13","2":"0.7286616","3":"0.5368488","4":"0.3871026","5":"0.2666035","6":"0.4048487","7":"0.1639025"},{"1":"DeepLearning_grid_2_AutoML_7_20230615_92338_model_1","2":"0.7145202","3":"0.6319918","4":"0.3822365","5":"0.2888258","6":"0.4024772","7":"0.1619879"},{"1":"GBM_5_AutoML_7_20230615_92338","2":"0.7142677","3":"0.4862155","4":"0.4214260","5":"0.3374369","6":"0.3866263","7":"0.1494799"},{"1":"GBM_grid_1_AutoML_7_20230615_92338_model_8","2":"0.7080808","3":"0.5166585","4":"0.4175656","5":"0.3356061","6":"0.3962121","7":"0.1569840"},{"1":"XRT_1_AutoML_7_20230615_92338","2":"0.7061237","3":"0.4639330","4":"0.3935067","5":"0.3244318","6":"0.3861768","7":"0.1491325"},{"1":"GBM_grid_1_AutoML_7_20230615_92338_model_15","2":"0.6955808","3":"0.5453734","4":"0.3879102","5":"0.3268308","6":"0.4068981","7":"0.1655661"},{"1":"DeepLearning_grid_3_AutoML_7_20230615_92338_model_1","2":"0.6142677","3":"0.5809799","4":"0.3026848","5":"0.3946970","6":"0.4197762","7":"0.1762120"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a>extract_h2o_model_name_by_position <span class="ot">&lt;-</span> <span class="cf">function</span>(h2o_leaderboard,</span>
<span id="cb14-2"><a href="#cb14-2"></a>                                                <span class="at">n=</span> <span class="dv">1</span>, <span class="at">verbose =</span> T){</span>
<span id="cb14-3"><a href="#cb14-3"></a>   model_name <span class="ot">&lt;-</span> h2o_leaderboard <span class="sc">%&gt;%</span></span>
<span id="cb14-4"><a href="#cb14-4"></a>     <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span></span>
<span id="cb14-5"><a href="#cb14-5"></a>     <span class="fu">slice</span>(n) <span class="sc">%&gt;%</span></span>
<span id="cb14-6"><a href="#cb14-6"></a>     <span class="fu">pull</span>(model_id)</span>
<span id="cb14-7"><a href="#cb14-7"></a>   <span class="cf">if</span> (verbose) <span class="fu">message</span>(model_name)</span>
<span id="cb14-8"><a href="#cb14-8"></a>   <span class="fu">return</span>(model_name)}</span>
<span id="cb14-9"><a href="#cb14-9"></a></span>
<span id="cb14-10"><a href="#cb14-10"></a><span class="co"># StackedEnsemble_BestOfFamily_1_AutoML_5_20230615_90739</span></span>
<span id="cb14-11"><a href="#cb14-11"></a>automl_leader <span class="ot">&lt;-</span> automl_models_h2o<span class="sc">@</span>leaderboard <span class="sc">%&gt;%</span> </span>
<span id="cb14-12"><a href="#cb14-12"></a>  <span class="fu">extract_h2o_model_name_by_position</span>(<span class="dv">4</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb14-13"><a href="#cb14-13"></a>  <span class="fu">h2o.getModel</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="predictoin" class="level3"><h3 class="anchored" data-anchor-id="predictoin">Predictoin</h3>
<div class="cell" data-hash="06_LIME_cache/html/unnamed-chunk-6_2eeb98cf988c0d5873201a9b20298c10">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a>predictions_tbl <span class="ot">&lt;-</span> automl_leader <span class="sc">%&gt;%</span> </span>
<span id="cb15-2"><a href="#cb15-2"></a>    <span class="fu">h2o.predict</span>(<span class="at">newdata =</span> <span class="fu">as.h2o</span>(test_tbl)) <span class="sc">%&gt;%</span></span>
<span id="cb15-3"><a href="#cb15-3"></a>    <span class="fu">as.tibble</span>() <span class="sc">%&gt;%</span></span>
<span id="cb15-4"><a href="#cb15-4"></a>    <span class="fu">bind_cols</span>(test_tbl <span class="sc">%&gt;%</span></span>
<span id="cb15-5"><a href="#cb15-5"></a>                <span class="fu">select</span>(Attrition, EmployeeNumber))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; 
  |                                                                            
  |                                                                      |   0%
  |                                                                            
  |======================================================================| 100%
#&gt; 
  |                                                                            
  |                                                                      |   0%
  |                                                                            
  |======================================================================| 100%</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a>predictions_tbl</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["predict"],"name":[1],"type":["fct"],"align":["left"]},{"label":["No"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["Yes"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["Attrition"],"name":[4],"type":["fct"],"align":["left"]},{"label":["EmployeeNumber"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"Yes","2":"0.63811943","3":"0.361880568","4":"Yes","5":"1"},{"1":"No","2":"0.99177980","3":"0.008220198","4":"No","5":"2"},{"1":"Yes","2":"0.37357070","3":"0.626429298","4":"Yes","5":"4"},{"1":"No","2":"0.94949445","3":"0.050505547","4":"No","5":"20"},{"1":"No","2":"0.99119614","3":"0.008803856","4":"No","5":"26"},{"1":"No","2":"0.96535841","3":"0.034641590","4":"No","5":"28"},{"1":"No","2":"0.93271359","3":"0.067286413","4":"Yes","5":"31"},{"1":"No","2":"0.71277914","3":"0.287220862","4":"No","5":"41"},{"1":"No","2":"0.73837344","3":"0.261626561","4":"Yes","5":"45"},{"1":"Yes","2":"0.40471866","3":"0.595281338","4":"No","5":"51"},{"1":"No","2":"0.92532187","3":"0.074678131","4":"No","5":"54"},{"1":"No","2":"0.74995230","3":"0.250047700","4":"No","5":"62"},{"1":"Yes","2":"0.51559076","3":"0.484409241","4":"No","5":"72"},{"1":"No","2":"0.81118306","3":"0.188816935","4":"No","5":"73"},{"1":"No","2":"0.99807862","3":"0.001921384","4":"No","5":"96"},{"1":"No","2":"0.78989343","3":"0.210106572","4":"No","5":"101"},{"1":"No","2":"0.93353449","3":"0.066465506","4":"No","5":"125"},{"1":"No","2":"0.88390931","3":"0.116090688","4":"No","5":"134"},{"1":"No","2":"0.82122644","3":"0.178773559","4":"No","5":"141"},{"1":"No","2":"0.97528030","3":"0.024719699","4":"No","5":"143"},{"1":"No","2":"0.97214006","3":"0.027859940","4":"No","5":"153"},{"1":"No","2":"0.98217366","3":"0.017826342","4":"No","5":"170"},{"1":"No","2":"0.84333761","3":"0.156662389","4":"No","5":"205"},{"1":"No","2":"0.99153586","3":"0.008464141","4":"No","5":"208"},{"1":"No","2":"0.87032137","3":"0.129678625","4":"No","5":"231"},{"1":"No","2":"0.92970669","3":"0.070293312","4":"No","5":"240"},{"1":"No","2":"0.98874528","3":"0.011254723","4":"No","5":"254"},{"1":"No","2":"0.99591739","3":"0.004082609","4":"No","5":"262"},{"1":"No","2":"0.73026737","3":"0.269732627","4":"No","5":"267"},{"1":"No","2":"0.99653847","3":"0.003461526","4":"No","5":"270"},{"1":"No","2":"0.95077853","3":"0.049221468","4":"No","5":"293"},{"1":"No","2":"0.96656181","3":"0.033438186","4":"No","5":"304"},{"1":"No","2":"0.94286527","3":"0.057134730","4":"No","5":"306"},{"1":"No","2":"0.82073953","3":"0.179260469","4":"No","5":"311"},{"1":"Yes","2":"0.60738541","3":"0.392614588","4":"Yes","5":"325"},{"1":"No","2":"0.85519418","3":"0.144805820","4":"No","5":"351"},{"1":"No","2":"0.99660009","3":"0.003399912","4":"No","5":"352"},{"1":"No","2":"0.87523219","3":"0.124767807","4":"No","5":"363"},{"1":"No","2":"0.99003901","3":"0.009960985","4":"No","5":"378"},{"1":"No","2":"0.96546493","3":"0.034535068","4":"No","5":"381"},{"1":"No","2":"0.99196655","3":"0.008033447","4":"No","5":"391"},{"1":"No","2":"0.97875205","3":"0.021247947","4":"No","5":"393"},{"1":"Yes","2":"0.50695905","3":"0.493040949","4":"Yes","5":"394"},{"1":"No","2":"0.97596668","3":"0.024033320","4":"No","5":"422"},{"1":"Yes","2":"0.61140332","3":"0.388596676","4":"No","5":"424"},{"1":"Yes","2":"0.64563124","3":"0.354368759","4":"No","5":"434"},{"1":"No","2":"0.98988504","3":"0.010114962","4":"No","5":"438"},{"1":"Yes","2":"0.25962843","3":"0.740371574","4":"Yes","5":"440"},{"1":"No","2":"0.81061608","3":"0.189383918","4":"Yes","5":"445"},{"1":"No","2":"0.96681679","3":"0.033183206","4":"No","5":"450"},{"1":"No","2":"0.99095232","3":"0.009047679","4":"No","5":"452"},{"1":"No","2":"0.88871710","3":"0.111282899","4":"No","5":"463"},{"1":"No","2":"0.73162175","3":"0.268378247","4":"No","5":"470"},{"1":"No","2":"0.82525133","3":"0.174748672","4":"No","5":"473"},{"1":"No","2":"0.91010679","3":"0.089893207","4":"Yes","5":"488"},{"1":"No","2":"0.72834055","3":"0.271659448","4":"Yes","5":"492"},{"1":"Yes","2":"0.49649888","3":"0.503501119","4":"No","5":"493"},{"1":"No","2":"0.84221256","3":"0.157787444","4":"No","5":"495"},{"1":"Yes","2":"0.51666930","3":"0.483330696","4":"Yes","5":"502"},{"1":"No","2":"0.98508826","3":"0.014911739","4":"No","5":"516"},{"1":"No","2":"0.96193896","3":"0.038061041","4":"No","5":"517"},{"1":"No","2":"0.76127680","3":"0.238723199","4":"No","5":"518"},{"1":"No","2":"0.96630298","3":"0.033697022","4":"No","5":"547"},{"1":"No","2":"0.93960812","3":"0.060391883","4":"No","5":"567"},{"1":"No","2":"0.88741025","3":"0.112589745","4":"No","5":"580"},{"1":"Yes","2":"0.32192384","3":"0.678076157","4":"Yes","5":"608"},{"1":"No","2":"0.94297264","3":"0.057027360","4":"Yes","5":"631"},{"1":"No","2":"0.75841412","3":"0.241585878","4":"No","5":"645"},{"1":"Yes","2":"0.44222654","3":"0.557773465","4":"Yes","5":"647"},{"1":"No","2":"0.85597063","3":"0.144029374","4":"No","5":"657"},{"1":"No","2":"0.99787871","3":"0.002121295","4":"No","5":"659"},{"1":"No","2":"0.93708252","3":"0.062917483","4":"No","5":"663"},{"1":"No","2":"0.97319434","3":"0.026805659","4":"No","5":"691"},{"1":"No","2":"0.95440673","3":"0.045593269","4":"No","5":"699"},{"1":"No","2":"0.84835659","3":"0.151643414","4":"No","5":"700"},{"1":"No","2":"0.98036164","3":"0.019638357","4":"No","5":"727"},{"1":"No","2":"0.90425020","3":"0.095749795","4":"No","5":"758"},{"1":"No","2":"0.88191339","3":"0.118086608","4":"No","5":"766"},{"1":"No","2":"0.99291703","3":"0.007082967","4":"No","5":"771"},{"1":"No","2":"0.87672341","3":"0.123276587","4":"Yes","5":"780"},{"1":"Yes","2":"0.65386267","3":"0.346137327","4":"Yes","5":"796"},{"1":"No","2":"0.96753169","3":"0.032468307","4":"No","5":"817"},{"1":"No","2":"0.99010169","3":"0.009898313","4":"No","5":"820"},{"1":"No","2":"0.99667880","3":"0.003321198","4":"No","5":"823"},{"1":"No","2":"0.99242525","3":"0.007574745","4":"No","5":"830"},{"1":"No","2":"0.92109634","3":"0.078903661","4":"No","5":"837"},{"1":"No","2":"0.97967510","3":"0.020324899","4":"Yes","5":"840"},{"1":"No","2":"0.97802840","3":"0.021971596","4":"Yes","5":"842"},{"1":"No","2":"0.95556925","3":"0.044430751","4":"No","5":"845"},{"1":"No","2":"0.72079913","3":"0.279200872","4":"Yes","5":"848"},{"1":"No","2":"0.96312105","3":"0.036878953","4":"No","5":"852"},{"1":"No","2":"0.89676184","3":"0.103238157","4":"No","5":"861"},{"1":"No","2":"0.80236953","3":"0.197630470","4":"No","5":"878"},{"1":"No","2":"0.98803575","3":"0.011964246","4":"No","5":"887"},{"1":"No","2":"0.97553806","3":"0.024461937","4":"No","5":"905"},{"1":"No","2":"0.99130784","3":"0.008692163","4":"No","5":"909"},{"1":"Yes","2":"0.50956289","3":"0.490437106","4":"No","5":"925"},{"1":"No","2":"0.71056073","3":"0.289439275","4":"No","5":"954"},{"1":"Yes","2":"0.31695373","3":"0.683046270","4":"Yes","5":"960"},{"1":"No","2":"0.96223179","3":"0.037768207","4":"No","5":"961"},{"1":"Yes","2":"0.53745820","3":"0.462541796","4":"No","5":"964"},{"1":"No","2":"0.99865113","3":"0.001348868","4":"No","5":"976"},{"1":"No","2":"0.91314609","3":"0.086853910","4":"Yes","5":"977"},{"1":"No","2":"0.76309991","3":"0.236900090","4":"Yes","5":"986"},{"1":"No","2":"0.93682870","3":"0.063171298","4":"No","5":"1012"},{"1":"No","2":"0.97112209","3":"0.028877908","4":"No","5":"1013"},{"1":"Yes","2":"0.21849063","3":"0.781509367","4":"Yes","5":"1016"},{"1":"No","2":"0.93593211","3":"0.064067890","4":"No","5":"1024"},{"1":"No","2":"0.98919472","3":"0.010805280","4":"No","5":"1026"},{"1":"No","2":"0.88276850","3":"0.117231499","4":"No","5":"1030"},{"1":"Yes","2":"0.52503183","3":"0.474968171","4":"Yes","5":"1037"},{"1":"Yes","2":"0.52695677","3":"0.473043226","4":"No","5":"1043"},{"1":"No","2":"0.89996721","3":"0.100032790","4":"Yes","5":"1052"},{"1":"No","2":"0.96125905","3":"0.038740950","4":"No","5":"1060"},{"1":"No","2":"0.94464973","3":"0.055350272","4":"No","5":"1076"},{"1":"Yes","2":"0.69379148","3":"0.306208520","4":"Yes","5":"1111"},{"1":"No","2":"0.78931174","3":"0.210688264","4":"No","5":"1119"},{"1":"Yes","2":"0.37180243","3":"0.628197568","4":"No","5":"1131"},{"1":"No","2":"0.95267118","3":"0.047328822","4":"No","5":"1132"},{"1":"No","2":"0.96460394","3":"0.035396061","4":"No","5":"1133"},{"1":"No","2":"0.77330850","3":"0.226691500","4":"No","5":"1135"},{"1":"No","2":"0.78960332","3":"0.210396677","4":"No","5":"1148"},{"1":"Yes","2":"0.53181105","3":"0.468188950","4":"No","5":"1154"},{"1":"Yes","2":"0.43401978","3":"0.565980216","4":"Yes","5":"1157"},{"1":"No","2":"0.87714241","3":"0.122857587","4":"No","5":"1166"},{"1":"Yes","2":"0.52326184","3":"0.476738159","4":"Yes","5":"1167"},{"1":"No","2":"0.85581327","3":"0.144186731","4":"No","5":"1171"},{"1":"No","2":"0.98619053","3":"0.013809468","4":"No","5":"1177"},{"1":"No","2":"0.82720060","3":"0.172799400","4":"No","5":"1193"},{"1":"No","2":"0.85191952","3":"0.148080481","4":"No","5":"1204"},{"1":"No","2":"0.69883926","3":"0.301160739","4":"Yes","5":"1210"},{"1":"No","2":"0.91558129","3":"0.084418705","4":"No","5":"1220"},{"1":"Yes","2":"0.59577753","3":"0.404222470","4":"No","5":"1226"},{"1":"No","2":"0.93278115","3":"0.067218850","4":"No","5":"1235"},{"1":"Yes","2":"0.40825251","3":"0.591747494","4":"No","5":"1242"},{"1":"No","2":"0.99623512","3":"0.003764876","4":"No","5":"1255"},{"1":"No","2":"0.94673684","3":"0.053263158","4":"No","5":"1259"},{"1":"No","2":"0.88205157","3":"0.117948435","4":"No","5":"1268"},{"1":"No","2":"0.75473415","3":"0.245265853","4":"No","5":"1281"},{"1":"No","2":"0.95443529","3":"0.045564715","4":"No","5":"1283"},{"1":"No","2":"0.86088283","3":"0.139117174","4":"No","5":"1324"},{"1":"No","2":"0.99358213","3":"0.006417871","4":"No","5":"1344"},{"1":"No","2":"0.91275822","3":"0.087241781","4":"No","5":"1362"},{"1":"No","2":"0.99575426","3":"0.004245737","4":"No","5":"1369"},{"1":"No","2":"0.83076725","3":"0.169232746","4":"No","5":"1374"},{"1":"No","2":"0.96147958","3":"0.038520418","4":"No","5":"1382"},{"1":"No","2":"0.98913943","3":"0.010860570","4":"No","5":"1422"},{"1":"No","2":"0.73462975","3":"0.265370250","4":"No","5":"1425"},{"1":"No","2":"0.94358195","3":"0.056418051","4":"No","5":"1430"},{"1":"Yes","2":"0.66569780","3":"0.334302196","4":"Yes","5":"1433"},{"1":"No","2":"0.77442807","3":"0.225571928","4":"No","5":"1434"},{"1":"No","2":"0.82701619","3":"0.172983813","4":"No","5":"1436"},{"1":"No","2":"0.98153998","3":"0.018460024","4":"No","5":"1446"},{"1":"No","2":"0.91401060","3":"0.085989402","4":"No","5":"1447"},{"1":"No","2":"0.89748294","3":"0.102517062","4":"Yes","5":"1457"},{"1":"Yes","2":"0.69294399","3":"0.307056011","4":"Yes","5":"1467"},{"1":"No","2":"0.96063038","3":"0.039369618","4":"No","5":"1478"},{"1":"No","2":"0.94881659","3":"0.051183413","4":"No","5":"1482"},{"1":"No","2":"0.95523791","3":"0.044762093","4":"No","5":"1485"},{"1":"Yes","2":"0.55506161","3":"0.444938389","4":"Yes","5":"1486"},{"1":"Yes","2":"0.45058772","3":"0.549412279","4":"Yes","5":"1489"},{"1":"Yes","2":"0.07557082","3":"0.924429178","4":"Yes","5":"1494"},{"1":"No","2":"0.81501796","3":"0.184982037","4":"No","5":"1506"},{"1":"No","2":"0.95270270","3":"0.047297304","4":"No","5":"1525"},{"1":"No","2":"0.90393464","3":"0.096065356","4":"No","5":"1529"},{"1":"No","2":"0.99095755","3":"0.009042448","4":"No","5":"1544"},{"1":"No","2":"0.90933546","3":"0.090664536","4":"No","5":"1545"},{"1":"No","2":"0.87957066","3":"0.120429340","4":"No","5":"1548"},{"1":"No","2":"0.98050265","3":"0.019497351","4":"No","5":"1552"},{"1":"No","2":"0.83671623","3":"0.163283767","4":"No","5":"1558"},{"1":"No","2":"0.99171870","3":"0.008281297","4":"Yes","5":"1573"},{"1":"No","2":"0.88870468","3":"0.111295318","4":"No","5":"1576"},{"1":"No","2":"0.83495163","3":"0.165048369","4":"No","5":"1577"},{"1":"No","2":"0.99408472","3":"0.005915280","4":"No","5":"1607"},{"1":"No","2":"0.94933347","3":"0.050666530","4":"No","5":"1623"},{"1":"No","2":"0.88138321","3":"0.118616785","4":"No","5":"1633"},{"1":"No","2":"0.91941149","3":"0.080588506","4":"No","5":"1638"},{"1":"Yes","2":"0.65902840","3":"0.340971596","4":"Yes","5":"1639"},{"1":"Yes","2":"0.21142425","3":"0.788575749","4":"Yes","5":"1649"},{"1":"No","2":"0.99313989","3":"0.006860110","4":"No","5":"1661"},{"1":"No","2":"0.95746799","3":"0.042532007","4":"No","5":"1673"},{"1":"No","2":"0.83566452","3":"0.164335480","4":"No","5":"1675"},{"1":"No","2":"0.97492572","3":"0.025074283","4":"No","5":"1681"},{"1":"No","2":"0.93759936","3":"0.062400638","4":"No","5":"1687"},{"1":"No","2":"0.98090169","3":"0.019098312","4":"No","5":"1689"},{"1":"No","2":"0.75970101","3":"0.240298992","4":"Yes","5":"1692"},{"1":"No","2":"0.98489349","3":"0.015106513","4":"No","5":"1707"},{"1":"No","2":"0.98300246","3":"0.016997535","4":"No","5":"1712"},{"1":"No","2":"0.97310260","3":"0.026897399","4":"No","5":"1722"},{"1":"No","2":"0.84220331","3":"0.157796685","4":"No","5":"1745"},{"1":"Yes","2":"0.13750811","3":"0.862491888","4":"Yes","5":"1758"},{"1":"No","2":"0.91362021","3":"0.086379788","4":"No","5":"1768"},{"1":"No","2":"0.95047443","3":"0.049525566","4":"No","5":"1772"},{"1":"Yes","2":"0.42615986","3":"0.573840142","4":"Yes","5":"1783"},{"1":"No","2":"0.93188824","3":"0.068111758","4":"No","5":"1786"},{"1":"No","2":"0.70673997","3":"0.293260028","4":"No","5":"1790"},{"1":"No","2":"0.81724403","3":"0.182755971","4":"Yes","5":"1792"},{"1":"No","2":"0.95396600","3":"0.046033998","4":"No","5":"1798"},{"1":"No","2":"0.78540521","3":"0.214594792","4":"No","5":"1816"},{"1":"No","2":"0.90024936","3":"0.099750644","4":"No","5":"1852"},{"1":"No","2":"0.81825892","3":"0.181741076","4":"No","5":"1856"},{"1":"No","2":"0.98403351","3":"0.015966491","4":"No","5":"1858"},{"1":"No","2":"0.76379868","3":"0.236201318","4":"Yes","5":"1876"},{"1":"No","2":"0.77491167","3":"0.225088328","4":"No","5":"1883"},{"1":"Yes","2":"0.63349271","3":"0.366507287","4":"No","5":"1893"},{"1":"No","2":"0.73509918","3":"0.264900820","4":"No","5":"1916"},{"1":"No","2":"0.93199335","3":"0.068006647","4":"No","5":"1927"},{"1":"No","2":"0.90495217","3":"0.095047833","4":"No","5":"1929"},{"1":"No","2":"0.97844230","3":"0.021557700","4":"No","5":"1965"},{"1":"Yes","2":"0.10831818","3":"0.891681823","4":"Yes","5":"1968"},{"1":"No","2":"0.72342809","3":"0.276571906","4":"No","5":"1975"},{"1":"No","2":"0.98069949","3":"0.019300511","4":"No","5":"1989"},{"1":"Yes","2":"0.65841484","3":"0.341585165","4":"No","5":"1992"},{"1":"No","2":"0.91626170","3":"0.083738301","4":"No","5":"1994"},{"1":"No","2":"0.99612365","3":"0.003876351","4":"No","5":"1995"},{"1":"No","2":"0.98832402","3":"0.011675975","4":"No","5":"1999"},{"1":"Yes","2":"0.57155538","3":"0.428444617","4":"No","5":"2003"},{"1":"No","2":"0.96025229","3":"0.039747706","4":"No","5":"2017"},{"1":"No","2":"0.84165946","3":"0.158340540","4":"Yes","5":"2032"},{"1":"No","2":"0.89971765","3":"0.100282346","4":"No","5":"2056"},{"1":"No","2":"0.80313760","3":"0.196862404","4":"No","5":"2060"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section><section id="lime-for-single-explanation" class="level3"><h3 class="anchored" data-anchor-id="lime-for-single-explanation">Lime for single explanation</h3>
<div class="cell" data-hash="06_LIME_cache/html/unnamed-chunk-7_f09d03c7731b84b739a7b973f4fa57f2">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a>explainer <span class="ot">&lt;-</span> train_tbl <span class="sc">%&gt;%</span></span>
<span id="cb18-2"><a href="#cb18-2"></a>    <span class="fu">select</span>(<span class="sc">-</span>Attrition) <span class="sc">%&gt;%</span></span>
<span id="cb18-3"><a href="#cb18-3"></a>    <span class="fu">lime</span>(</span>
<span id="cb18-4"><a href="#cb18-4"></a>        <span class="at">model           =</span> automl_leader,</span>
<span id="cb18-5"><a href="#cb18-5"></a>        <span class="at">bin_continuous  =</span> <span class="cn">TRUE</span>,</span>
<span id="cb18-6"><a href="#cb18-6"></a>        <span class="at">n_bins          =</span> <span class="dv">4</span>,</span>
<span id="cb18-7"><a href="#cb18-7"></a>        <span class="at">quantile_bins   =</span> <span class="cn">TRUE</span>)</span>
<span id="cb18-8"><a href="#cb18-8"></a></span>
<span id="cb18-9"><a href="#cb18-9"></a>explanation <span class="ot">&lt;-</span> test_tbl <span class="sc">%&gt;%</span></span>
<span id="cb18-10"><a href="#cb18-10"></a>    <span class="fu">slice</span>(<span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb18-11"><a href="#cb18-11"></a>    <span class="fu">select</span>(<span class="sc">-</span>Attrition) <span class="sc">%&gt;%</span></span>
<span id="cb18-12"><a href="#cb18-12"></a>    lime<span class="sc">::</span><span class="fu">explain</span>(</span>
<span id="cb18-13"><a href="#cb18-13"></a>        <span class="at">explainer =</span> explainer,</span>
<span id="cb18-14"><a href="#cb18-14"></a>        <span class="at">n_labels   =</span> <span class="dv">1</span>,</span>
<span id="cb18-15"><a href="#cb18-15"></a>        <span class="at">n_features =</span> <span class="dv">20</span>,</span>
<span id="cb18-16"><a href="#cb18-16"></a>        <span class="at">n_permutations =</span> <span class="dv">5000</span>,</span>
<span id="cb18-17"><a href="#cb18-17"></a>        <span class="at">kernel_width   =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; 
  |                                                                            
  |                                                                      |   0%
  |                                                                            
  |======================================================================| 100%
#&gt; 
  |                                                                            
  |                                                                      |   0%
  |                                                                            
  |======================================================================| 100%</code></pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a>explanation <span class="sc">%&gt;%</span> <span class="fu">as.tibble</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["model_type"],"name":[1],"type":["chr"],"align":["left"]},{"label":["case"],"name":[2],"type":["chr"],"align":["left"]},{"label":["label"],"name":[3],"type":["chr"],"align":["left"]},{"label":["label_prob"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["model_r2"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["model_intercept"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["model_prediction"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["feature"],"name":[8],"type":["chr"],"align":["left"]},{"label":["feature_value"],"name":[9],"type":["dbl"],"align":["right"]},{"label":["feature_weight"],"name":[10],"type":["dbl"],"align":["right"]},{"label":["feature_desc"],"name":[11],"type":["chr"],"align":["left"]},{"label":["data"],"name":[12],"type":["list"],"align":["right"]},{"label":["prediction"],"name":[13],"type":["list"],"align":["right"]}],"data":[{"1":"classification","2":"1","3":"No","4":"0.6381194","5":"0.456522","6":"0.7962966","7":"0.6600504","8":"OverTime","9":"2","10":"-0.20890125","11":"OverTime = Yes","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"1","3":"No","4":"0.6381194","5":"0.456522","6":"0.7962966","7":"0.6600504","8":"JobLevel","9":"2","10":"0.10629972","11":"JobLevel = 2","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"1","3":"No","4":"0.6381194","5":"0.456522","6":"0.7962966","7":"0.6600504","8":"NumCompaniesWorked","9":"8","10":"-0.10255677","11":"4 < NumCompaniesWorked","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"1","3":"No","4":"0.6381194","5":"0.456522","6":"0.7962966","7":"0.6600504","8":"StockOptionLevel","9":"1","10":"-0.07861048","11":"StockOptionLevel = 0","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"1","3":"No","4":"0.6381194","5":"0.456522","6":"0.7962966","7":"0.6600504","8":"JobSatisfaction","9":"4","10":"0.06525794","11":"JobSatisfaction = Very High","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"1","3":"No","4":"0.6381194","5":"0.456522","6":"0.7962966","7":"0.6600504","8":"YearsSinceLastPromotion","9":"0","10":"0.06277721","11":"YearsSinceLastPromotion <= 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"1","3":"No","4":"0.6381194","5":"0.456522","6":"0.7962966","7":"0.6600504","8":"RelationshipSatisfaction","9":"1","10":"-0.05300327","11":"RelationshipSatisfaction = Low","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"1","3":"No","4":"0.6381194","5":"0.456522","6":"0.7962966","7":"0.6600504","8":"WorkLifeBalance","9":"1","10":"-0.05153424","11":"WorkLifeBalance = Bad","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"1","3":"No","4":"0.6381194","5":"0.456522","6":"0.7962966","7":"0.6600504","8":"DistanceFromHome","9":"1","10":"0.04548583","11":"DistanceFromHome <= 2","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"1","3":"No","4":"0.6381194","5":"0.456522","6":"0.7962966","7":"0.6600504","8":"BusinessTravel","9":"2","10":"0.04347307","11":"BusinessTravel = Travel_Rarely","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"1","3":"No","4":"0.6381194","5":"0.456522","6":"0.7962966","7":"0.6600504","8":"JobInvolvement","9":"3","10":"0.03735339","11":"JobInvolvement = High","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"1","3":"No","4":"0.6381194","5":"0.456522","6":"0.7962966","7":"0.6600504","8":"Department","9":"3","10":"-0.03726434","11":"Department = Sales","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"1","3":"No","4":"0.6381194","5":"0.456522","6":"0.7962966","7":"0.6600504","8":"MaritalStatus","9":"1","10":"-0.03159922","11":"MaritalStatus = Single","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"1","3":"No","4":"0.6381194","5":"0.456522","6":"0.7962966","7":"0.6600504","8":"Gender","9":"1","10":"0.02705577","11":"Gender = Female","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"1","3":"No","4":"0.6381194","5":"0.456522","6":"0.7962966","7":"0.6600504","8":"YearsInCurrentRole","9":"4","10":"0.02456211","11":"3 < YearsInCurrentRole <= 7","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"1","3":"No","4":"0.6381194","5":"0.456522","6":"0.7962966","7":"0.6600504","8":"Age","9":"41","10":"0.02264475","11":"36 < Age <= 43","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"1","3":"No","4":"0.6381194","5":"0.456522","6":"0.7962966","7":"0.6600504","8":"TrainingTimesLastYear","9":"0","10":"-0.02075268","11":"TrainingTimesLastYear <= 2","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"1","3":"No","4":"0.6381194","5":"0.456522","6":"0.7962966","7":"0.6600504","8":"JobRole","9":"8","10":"-0.01393606","11":"JobRole = Sales Executive","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"1","3":"No","4":"0.6381194","5":"0.456522","6":"0.7962966","7":"0.6600504","8":"YearsAtCompany","9":"6","10":"0.01402767","11":"5 < YearsAtCompany <= 10","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"1","3":"No","4":"0.6381194","5":"0.456522","6":"0.7962966","7":"0.6600504","8":"DailyRate","9":"1102","10":"0.01297472","11":"798 < DailyRate <= 1151","12":"<named list [31]>","13":"<named list [2]>"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a>g1 <span class="ot">&lt;-</span> <span class="fu">plot_features</span>(<span class="at">explanation =</span> explanation, <span class="at">ncol =</span> <span class="dv">1</span>)</span>
<span id="cb21-2"><a href="#cb21-2"></a>g1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="06_LIME_files/figure-html/unnamed-chunk-7-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="06_LIME_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a>explanation_df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(explanation)</span>
<span id="cb22-2"><a href="#cb22-2"></a>exp_tibble <span class="ot">&lt;-</span> explanation_df[, <span class="fu">c</span>(<span class="st">"feature"</span>, <span class="st">"feature_weight"</span>)]</span>
<span id="cb22-3"><a href="#cb22-3"></a>exp_tibble <span class="ot">&lt;-</span> exp_tibble[<span class="fu">order</span>(exp_tibble<span class="sc">$</span>feature_weight), ]</span>
<span id="cb22-4"><a href="#cb22-4"></a>exp_tibble<span class="sc">$</span>Support <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(exp_tibble<span class="sc">$</span>feature_weight <span class="sc">&gt;</span> <span class="dv">0</span>, <span class="st">"Supports"</span>, <span class="st">"Contradicts"</span>)</span>
<span id="cb22-5"><a href="#cb22-5"></a>explained_employee <span class="ot">&lt;-</span> test_tbl<span class="sc">$</span>EmployeeNumber[<span class="dv">1</span>]</span>
<span id="cb22-6"><a href="#cb22-6"></a>features <span class="ot">&lt;-</span> test_tbl[<span class="dv">1</span>, ] <span class="sc">%&gt;%</span> <span class="fu">as_tibble</span>()</span>
<span id="cb22-7"><a href="#cb22-7"></a>features_df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(features)</span>
<span id="cb22-8"><a href="#cb22-8"></a></span>
<span id="cb22-9"><a href="#cb22-9"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(explanation_df)){</span>
<span id="cb22-10"><a href="#cb22-10"></a>  feature_name <span class="ot">&lt;-</span> explanation_df<span class="sc">$</span>feature[i]</span>
<span id="cb22-11"><a href="#cb22-11"></a>  feature_value <span class="ot">&lt;-</span> features_df[[feature_name]]</span>
<span id="cb22-12"><a href="#cb22-12"></a>  explanation_df<span class="sc">$</span>feature[i] <span class="ot">&lt;-</span> <span class="fu">paste</span>(feature_name, <span class="st">"="</span>, feature_value)}</span>
<span id="cb22-13"><a href="#cb22-13"></a></span>
<span id="cb22-14"><a href="#cb22-14"></a><span class="fu">ggplot</span>(<span class="at">data =</span> exp_tibble, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(feature, feature_weight), <span class="at">y =</span> feature_weight, <span class="at">fill =</span> Support)) <span class="sc">+</span></span>
<span id="cb22-15"><a href="#cb22-15"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>) <span class="sc">+</span></span>
<span id="cb22-16"><a href="#cb22-16"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb22-17"><a href="#cb22-17"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"Supports"</span> <span class="ot">=</span> <span class="st">"darkturquoise"</span>, <span class="st">"Contradicts"</span> <span class="ot">=</span> <span class="st">"gray"</span>)) <span class="sc">+</span></span>
<span id="cb22-18"><a href="#cb22-18"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Features"</span>, <span class="at">y =</span> <span class="st">"Weight"</span>, <span class="at">title =</span> <span class="st">"Feature Importance"</span>) <span class="sc">+</span></span>
<span id="cb22-19"><a href="#cb22-19"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="06_LIME_files/figure-html/unnamed-chunk-7-2.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2"><img src="06_LIME_files/figure-html/unnamed-chunk-7-2.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
</section><section id="visualizing-feature-importance-for-multiple-explanations" class="level3"><h3 class="anchored" data-anchor-id="visualizing-feature-importance-for-multiple-explanations">Visualizing Feature Importance For Multiple Explanations</h3>
<div class="cell" data-hash="06_LIME_cache/html/unnamed-chunk-8_82bd459cb1c657ca044c322c240aa743">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a>explanation <span class="ot">&lt;-</span> test_tbl <span class="sc">%&gt;%</span></span>
<span id="cb23-2"><a href="#cb23-2"></a>    <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>) <span class="sc">%&gt;%</span></span>
<span id="cb23-3"><a href="#cb23-3"></a>    <span class="fu">select</span>(<span class="sc">-</span>Attrition) <span class="sc">%&gt;%</span></span>
<span id="cb23-4"><a href="#cb23-4"></a>    lime<span class="sc">::</span><span class="fu">explain</span>(</span>
<span id="cb23-5"><a href="#cb23-5"></a>        <span class="at">explainer =</span> explainer,</span>
<span id="cb23-6"><a href="#cb23-6"></a>        <span class="at">n_labels   =</span> <span class="dv">1</span>,</span>
<span id="cb23-7"><a href="#cb23-7"></a>        <span class="at">n_features =</span> <span class="dv">8</span>,</span>
<span id="cb23-8"><a href="#cb23-8"></a>        <span class="at">n_permutations =</span> <span class="dv">5000</span>,</span>
<span id="cb23-9"><a href="#cb23-9"></a>        <span class="at">kernel_width   =</span> <span class="fl">0.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; 
  |                                                                            
  |                                                                      |   0%
  |                                                                            
  |======================================================================| 100%
#&gt; 
  |                                                                            
  |                                                                      |   0%
  |                                                                            
  |======================================================================| 100%</code></pre>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a>explanation <span class="sc">%&gt;%</span> <span class="fu">as.tibble</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["model_type"],"name":[1],"type":["chr"],"align":["left"]},{"label":["case"],"name":[2],"type":["chr"],"align":["left"]},{"label":["label"],"name":[3],"type":["chr"],"align":["left"]},{"label":["label_prob"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["model_r2"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["model_intercept"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["model_prediction"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["feature"],"name":[8],"type":["chr"],"align":["left"]},{"label":["feature_value"],"name":[9],"type":["dbl"],"align":["right"]},{"label":["feature_weight"],"name":[10],"type":["dbl"],"align":["right"]},{"label":["feature_desc"],"name":[11],"type":["chr"],"align":["left"]},{"label":["data"],"name":[12],"type":["list"],"align":["right"]},{"label":["prediction"],"name":[13],"type":["list"],"align":["right"]}],"data":[{"1":"classification","2":"1","3":"No","4":"0.6381194","5":"0.3977289","6":"0.87516414","7":"0.6109918","8":"OverTime","9":"2","10":"-0.20228900","11":"OverTime = Yes","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"1","3":"No","4":"0.6381194","5":"0.3977289","6":"0.87516414","7":"0.6109918","8":"JobLevel","9":"2","10":"0.09341169","11":"JobLevel = 2","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"1","3":"No","4":"0.6381194","5":"0.3977289","6":"0.87516414","7":"0.6109918","8":"NumCompaniesWorked","9":"8","10":"-0.09241530","11":"4 < NumCompaniesWorked","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"1","3":"No","4":"0.6381194","5":"0.3977289","6":"0.87516414","7":"0.6109918","8":"StockOptionLevel","9":"1","10":"-0.07771559","11":"StockOptionLevel = 0","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"1","3":"No","4":"0.6381194","5":"0.3977289","6":"0.87516414","7":"0.6109918","8":"YearsSinceLastPromotion","9":"0","10":"0.06343982","11":"YearsSinceLastPromotion <= 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"1","3":"No","4":"0.6381194","5":"0.3977289","6":"0.87516414","7":"0.6109918","8":"JobSatisfaction","9":"4","10":"0.06246451","11":"JobSatisfaction = Very High","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"1","3":"No","4":"0.6381194","5":"0.3977289","6":"0.87516414","7":"0.6109918","8":"WorkLifeBalance","9":"1","10":"-0.06075506","11":"WorkLifeBalance = Bad","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"1","3":"No","4":"0.6381194","5":"0.3977289","6":"0.87516414","7":"0.6109918","8":"Department","9":"3","10":"-0.05031335","11":"Department = Sales","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"2","3":"No","4":"0.9917798","5":"0.3744983","6":"0.56292742","7":"1.0501197","8":"OverTime","9":"1","10":"0.19983159","11":"OverTime = No","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"2","3":"No","4":"0.9917798","5":"0.3744983","6":"0.56292742","7":"1.0501197","8":"JobLevel","9":"2","10":"0.09728450","11":"JobLevel = 2","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"2","3":"No","4":"0.9917798","5":"0.3744983","6":"0.56292742","7":"1.0501197","8":"BusinessTravel","9":"3","10":"-0.08452699","11":"BusinessTravel = Travel_Frequently","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"2","3":"No","4":"0.9917798","5":"0.3744983","6":"0.56292742","7":"1.0501197","8":"StockOptionLevel","9":"2","10":"0.06727958","11":"StockOptionLevel = 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"2","3":"No","4":"0.9917798","5":"0.3744983","6":"0.56292742","7":"1.0501197","8":"Age","9":"49","10":"0.06103062","11":"43 < Age","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"2","3":"No","4":"0.9917798","5":"0.3744983","6":"0.56292742","7":"1.0501197","8":"NumCompaniesWorked","9":"1","10":"0.05529766","11":"NumCompaniesWorked <= 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"2","3":"No","4":"0.9917798","5":"0.3744983","6":"0.56292742","7":"1.0501197","8":"YearsSinceLastPromotion","9":"1","10":"0.04503241","11":"YearsSinceLastPromotion <= 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"2","3":"No","4":"0.9917798","5":"0.3744983","6":"0.56292742","7":"1.0501197","8":"JobRole","9":"7","10":"0.04596292","11":"JobRole = Research Scientist","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"3","3":"Yes","4":"0.6264293","5":"0.3781291","6":"0.04001544","7":"0.5035118","8":"OverTime","9":"2","10":"0.20876654","11":"OverTime = Yes","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"3","3":"Yes","4":"0.6264293","5":"0.3781291","6":"0.04001544","7":"0.5035118","8":"NumCompaniesWorked","9":"6","10":"0.08780788","11":"4 < NumCompaniesWorked","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"3","3":"Yes","4":"0.6264293","5":"0.3781291","6":"0.04001544","7":"0.5035118","8":"JobLevel","9":"1","10":"0.08686948","11":"JobLevel = 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"3","3":"Yes","4":"0.6264293","5":"0.3781291","6":"0.04001544","7":"0.5035118","8":"StockOptionLevel","9":"1","10":"0.08360658","11":"StockOptionLevel = 0","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"3","3":"Yes","4":"0.6264293","5":"0.3781291","6":"0.04001544","7":"0.5035118","8":"YearsSinceLastPromotion","9":"0","10":"-0.06365164","11":"YearsSinceLastPromotion <= 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"3","3":"Yes","4":"0.6264293","5":"0.3781291","6":"0.04001544","7":"0.5035118","8":"YearsInCurrentRole","9":"0","10":"0.05642031","11":"YearsInCurrentRole <= 2","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"3","3":"Yes","4":"0.6264293","5":"0.3781291","6":"0.04001544","7":"0.5035118","8":"JobRole","9":"3","10":"0.04820734","11":"JobRole = Laboratory Technician","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"3","3":"Yes","4":"0.6264293","5":"0.3781291","6":"0.04001544","7":"0.5035118","8":"DistanceFromHome","9":"2","10":"-0.04453013","11":"DistanceFromHome <= 2","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"4","3":"No","4":"0.9494945","5":"0.3664133","6":"0.63479991","7":"0.9370746","8":"OverTime","9":"1","10":"0.21603950","11":"OverTime = No","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"4","3":"No","4":"0.9494945","5":"0.3664133","6":"0.63479991","7":"0.9370746","8":"YearsInCurrentRole","9":"9","10":"0.08366659","11":"7 < YearsInCurrentRole","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"4","3":"No","4":"0.9494945","5":"0.3664133","6":"0.63479991","7":"0.9370746","8":"YearsSinceLastPromotion","9":"8","10":"-0.07793521","11":"3 < YearsSinceLastPromotion","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"4","3":"No","4":"0.9494945","5":"0.3664133","6":"0.63479991","7":"0.9370746","8":"StockOptionLevel","9":"2","10":"0.07231787","11":"StockOptionLevel = 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"4","3":"No","4":"0.9494945","5":"0.3664133","6":"0.63479991","7":"0.9370746","8":"YearsWithCurrManager","9":"8","10":"0.06286703","11":"7 < YearsWithCurrManager","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"4","3":"No","4":"0.9494945","5":"0.3664133","6":"0.63479991","7":"0.9370746","8":"JobSatisfaction","9":"1","10":"-0.05814783","11":"JobSatisfaction = Low","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"4","3":"No","4":"0.9494945","5":"0.3664133","6":"0.63479991","7":"0.9370746","8":"NumCompaniesWorked","9":"1","10":"0.06102661","11":"NumCompaniesWorked <= 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"4","3":"No","4":"0.9494945","5":"0.3664133","6":"0.63479991","7":"0.9370746","8":"Age","9":"29","10":"-0.05755987","11":"Age <= 30","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"5","3":"No","4":"0.9911961","5":"0.3798906","6":"0.64711497","7":"0.9337530","8":"OverTime","9":"1","10":"0.20507126","11":"OverTime = No","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"5","3":"No","4":"0.9911961","5":"0.3798906","6":"0.64711497","7":"0.9337530","8":"JobLevel","9":"2","10":"0.09520260","11":"JobLevel = 2","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"5","3":"No","4":"0.9911961","5":"0.3798906","6":"0.64711497","7":"0.9337530","8":"EnvironmentSatisfaction","9":"1","10":"-0.07415860","11":"EnvironmentSatisfaction = Low","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"5","3":"No","4":"0.9911961","5":"0.3798906","6":"0.64711497","7":"0.9337530","8":"StockOptionLevel","9":"2","10":"0.06979756","11":"StockOptionLevel = 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"5","3":"No","4":"0.9911961","5":"0.3798906","6":"0.64711497","7":"0.9337530","8":"Age","9":"24","10":"-0.06875139","11":"Age <= 30","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"5","3":"No","4":"0.9911961","5":"0.3798906","6":"0.64711497","7":"0.9337530","8":"BusinessTravel","9":"1","10":"0.06206493","11":"BusinessTravel = Non-Travel","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"5","3":"No","4":"0.9911961","5":"0.3798906","6":"0.64711497","7":"0.9337530","8":"YearsInCurrentRole","9":"2","10":"-0.05669036","11":"YearsInCurrentRole <= 2","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"5","3":"No","4":"0.9911961","5":"0.3798906","6":"0.64711497","7":"0.9337530","8":"NumCompaniesWorked","9":"0","10":"0.05410205","11":"NumCompaniesWorked <= 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"6","3":"No","4":"0.9653584","5":"0.3726657","6":"0.69307417","7":"0.8412774","8":"OverTime","9":"1","10":"0.21464173","11":"OverTime = No","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"6","3":"No","4":"0.9653584","5":"0.3726657","6":"0.69307417","7":"0.8412774","8":"YearsAtCompany","9":"12","10":"-0.11733047","11":"10 < YearsAtCompany","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"6","3":"No","4":"0.9653584","5":"0.3726657","6":"0.69307417","7":"0.8412774","8":"EnvironmentSatisfaction","9":"1","10":"-0.08756134","11":"EnvironmentSatisfaction = Low","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"6","3":"No","4":"0.9653584","5":"0.3726657","6":"0.69307417","7":"0.8412774","8":"StockOptionLevel","9":"1","10":"-0.08009487","11":"StockOptionLevel = 0","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"6","3":"No","4":"0.9653584","5":"0.3726657","6":"0.69307417","7":"0.8412774","8":"YearsWithCurrManager","9":"11","10":"0.06715357","11":"7 < YearsWithCurrManager","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"6","3":"No","4":"0.9653584","5":"0.3726657","6":"0.69307417","7":"0.8412774","8":"MonthlyIncome","9":"11994","10":"0.05085225","11":"8189 < MonthlyIncome","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"6","3":"No","4":"0.9653584","5":"0.3726657","6":"0.69307417","7":"0.8412774","8":"NumCompaniesWorked","9":"0","10":"0.05665337","11":"NumCompaniesWorked <= 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"6","3":"No","4":"0.9653584","5":"0.3726657","6":"0.69307417","7":"0.8412774","8":"JobRole","9":"6","10":"0.04388901","11":"JobRole = Research Director","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"7","3":"No","4":"0.9327136","5":"0.3869447","6":"0.72544335","7":"0.7682124","8":"OverTime","9":"1","10":"0.21805843","11":"OverTime = No","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"7","3":"No","4":"0.9327136","5":"0.3869447","6":"0.72544335","7":"0.7682124","8":"StockOptionLevel","9":"1","10":"-0.09409500","11":"StockOptionLevel = 0","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"7","3":"No","4":"0.9327136","5":"0.3869447","6":"0.72544335","7":"0.7682124","8":"JobLevel","9":"1","10":"-0.08532494","11":"JobLevel = 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"7","3":"No","4":"0.9327136","5":"0.3869447","6":"0.72544335","7":"0.7682124","8":"YearsInCurrentRole","9":"2","10":"-0.06971378","11":"YearsInCurrentRole <= 2","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"7","3":"No","4":"0.9327136","5":"0.3869447","6":"0.72544335","7":"0.7682124","8":"JobSatisfaction","9":"1","10":"-0.06756839","11":"JobSatisfaction = Low","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"7","3":"No","4":"0.9327136","5":"0.3869447","6":"0.72544335","7":"0.7682124","8":"YearsSinceLastPromotion","9":"1","10":"0.05071853","11":"YearsSinceLastPromotion <= 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"7","3":"No","4":"0.9327136","5":"0.3869447","6":"0.72544335","7":"0.7682124","8":"JobRole","9":"7","10":"0.05209881","11":"JobRole = Research Scientist","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"7","3":"No","4":"0.9327136","5":"0.3869447","6":"0.72544335","7":"0.7682124","8":"WorkLifeBalance","9":"3","10":"0.03859540","11":"WorkLifeBalance = Better","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"8","3":"No","4":"0.7127791","5":"0.3835199","6":"0.74577972","7":"0.7412617","8":"OverTime","9":"1","10":"0.21981481","11":"OverTime = No","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"8","3":"No","4":"0.7127791","5":"0.3835199","6":"0.74577972","7":"0.7412617","8":"JobLevel","9":"1","10":"-0.08184782","11":"JobLevel = 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"8","3":"No","4":"0.7127791","5":"0.3835199","6":"0.74577972","7":"0.7412617","8":"StockOptionLevel","9":"1","10":"-0.08363440","11":"StockOptionLevel = 0","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"8","3":"No","4":"0.7127791","5":"0.3835199","6":"0.74577972","7":"0.7412617","8":"Age","9":"30","10":"-0.06506668","11":"Age <= 30","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"8","3":"No","4":"0.7127791","5":"0.3835199","6":"0.74577972","7":"0.7412617","8":"YearsWithCurrManager","9":"8","10":"0.05923661","11":"7 < YearsWithCurrManager","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"8","3":"No","4":"0.7127791","5":"0.3835199","6":"0.74577972","7":"0.7412617","8":"YearsInCurrentRole","9":"0","10":"-0.05923454","11":"YearsInCurrentRole <= 2","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"8","3":"No","4":"0.7127791","5":"0.3835199","6":"0.74577972","7":"0.7412617","8":"YearsSinceLastPromotion","9":"1","10":"0.05820151","11":"YearsSinceLastPromotion <= 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"8","3":"No","4":"0.7127791","5":"0.3835199","6":"0.74577972","7":"0.7412617","8":"RelationshipSatisfaction","9":"1","10":"-0.05198747","11":"RelationshipSatisfaction = Low","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"9","3":"No","4":"0.7383734","5":"0.3491445","6":"0.89201378","7":"0.6355151","8":"OverTime","9":"2","10":"-0.20249298","11":"OverTime = Yes","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"9","3":"No","4":"0.7383734","5":"0.3491445","6":"0.89201378","7":"0.6355151","8":"JobLevel","9":"1","10":"-0.07924934","11":"JobLevel = 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"9","3":"No","4":"0.7383734","5":"0.3491445","6":"0.89201378","7":"0.6355151","8":"StockOptionLevel","9":"2","10":"0.06382864","11":"StockOptionLevel = 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"9","3":"No","4":"0.7383734","5":"0.3491445","6":"0.89201378","7":"0.6355151","8":"JobSatisfaction","9":"4","10":"0.06511985","11":"JobSatisfaction = Very High","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"9","3":"No","4":"0.7383734","5":"0.3491445","6":"0.89201378","7":"0.6355151","8":"Age","9":"24","10":"-0.05576220","11":"Age <= 30","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"9","3":"No","4":"0.7383734","5":"0.3491445","6":"0.89201378","7":"0.6355151","8":"YearsInCurrentRole","9":"0","10":"-0.04964774","11":"YearsInCurrentRole <= 2","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"9","3":"No","4":"0.7383734","5":"0.3491445","6":"0.89201378","7":"0.6355151","8":"Department","9":"2","10":"0.04982061","11":"Department = Research & Development","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"9","3":"No","4":"0.7383734","5":"0.3491445","6":"0.89201378","7":"0.6355151","8":"RelationshipSatisfaction","9":"1","10":"-0.04811552","11":"RelationshipSatisfaction = Low","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"10","3":"Yes","4":"0.5952813","5":"0.3788704","6":"0.08782523","7":"0.4345146","8":"OverTime","9":"2","10":"0.21410465","11":"OverTime = Yes","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"10","3":"Yes","4":"0.5952813","5":"0.3788704","6":"0.08782523","7":"0.4345146","8":"NumCompaniesWorked","9":"9","10":"0.10606845","11":"4 < NumCompaniesWorked","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"10","3":"Yes","4":"0.5952813","5":"0.3788704","6":"0.08782523","7":"0.4345146","8":"JobLevel","9":"1","10":"0.08194517","11":"JobLevel = 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"10","3":"Yes","4":"0.5952813","5":"0.3788704","6":"0.08782523","7":"0.4345146","8":"StockOptionLevel","9":"2","10":"-0.06589122","11":"StockOptionLevel = 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"10","3":"Yes","4":"0.5952813","5":"0.3788704","6":"0.08782523","7":"0.4345146","8":"JobSatisfaction","9":"1","10":"0.06476888","11":"JobSatisfaction = Low","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"10","3":"Yes","4":"0.5952813","5":"0.3788704","6":"0.08782523","7":"0.4345146","8":"JobRole","9":"7","10":"-0.05907902","11":"JobRole = Research Scientist","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"10","3":"Yes","4":"0.5952813","5":"0.3788704","6":"0.08782523","7":"0.4345146","8":"YearsInCurrentRole","9":"1","10":"0.05629012","11":"YearsInCurrentRole <= 2","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"10","3":"Yes","4":"0.5952813","5":"0.3788704","6":"0.08782523","7":"0.4345146","8":"YearsSinceLastPromotion","9":"0","10":"-0.05151768","11":"YearsSinceLastPromotion <= 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"11","3":"No","4":"0.9253219","5":"0.3457800","6":"0.64350294","7":"0.8805580","8":"OverTime","9":"1","10":"0.20496246","11":"OverTime = No","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"11","3":"No","4":"0.9253219","5":"0.3457800","6":"0.64350294","7":"0.8805580","8":"JobLevel","9":"1","10":"-0.07188411","11":"JobLevel = 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"11","3":"No","4":"0.9253219","5":"0.3457800","6":"0.64350294","7":"0.8805580","8":"StockOptionLevel","9":"2","10":"0.06049197","11":"StockOptionLevel = 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"11","3":"No","4":"0.9253219","5":"0.3457800","6":"0.64350294","7":"0.8805580","8":"Age","9":"27","10":"-0.05633348","11":"Age <= 30","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"11","3":"No","4":"0.9253219","5":"0.3457800","6":"0.64350294","7":"0.8805580","8":"JobSatisfaction","9":"1","10":"-0.05547601","11":"JobSatisfaction = Low","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"11","3":"No","4":"0.9253219","5":"0.3457800","6":"0.64350294","7":"0.8805580","8":"YearsSinceLastPromotion","9":"0","10":"0.05411707","11":"YearsSinceLastPromotion <= 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"11","3":"No","4":"0.9253219","5":"0.3457800","6":"0.64350294","7":"0.8805580","8":"NumCompaniesWorked","9":"1","10":"0.05108307","11":"NumCompaniesWorked <= 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"11","3":"No","4":"0.9253219","5":"0.3457800","6":"0.64350294","7":"0.8805580","8":"DistanceFromHome","9":"2","10":"0.05009405","11":"DistanceFromHome <= 2","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"12","3":"No","4":"0.7499523","5":"0.4402400","6":"0.85997600","7":"0.6518093","8":"OverTime","9":"2","10":"-0.22470189","11":"OverTime = Yes","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"12","3":"No","4":"0.7499523","5":"0.4402400","6":"0.85997600","7":"0.6518093","8":"JobLevel","9":"2","10":"0.09987367","11":"JobLevel = 2","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"12","3":"No","4":"0.7499523","5":"0.4402400","6":"0.85997600","7":"0.6518093","8":"StockOptionLevel","9":"1","10":"-0.09230399","11":"StockOptionLevel = 0","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"12","3":"No","4":"0.7499523","5":"0.4402400","6":"0.85997600","7":"0.6518093","8":"BusinessTravel","9":"3","10":"-0.08678245","11":"BusinessTravel = Travel_Frequently","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"12","3":"No","4":"0.7499523","5":"0.4402400","6":"0.85997600","7":"0.6518093","8":"EnvironmentSatisfaction","9":"1","10":"-0.08416133","11":"EnvironmentSatisfaction = Low","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"12","3":"No","4":"0.7499523","5":"0.4402400","6":"0.85997600","7":"0.6518093","8":"Age","9":"46","10":"0.06890897","11":"43 < Age","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"12","3":"No","4":"0.7499523","5":"0.4402400","6":"0.85997600","7":"0.6518093","8":"JobSatisfaction","9":"4","10":"0.05572336","11":"JobSatisfaction = Very High","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"12","3":"No","4":"0.7499523","5":"0.4402400","6":"0.85997600","7":"0.6518093","8":"YearsSinceLastPromotion","9":"0","10":"0.05527692","11":"YearsSinceLastPromotion <= 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"13","3":"No","4":"0.5155908","5":"0.4163925","6":"0.82262013","7":"0.6767383","8":"OverTime","9":"2","10":"-0.20820287","11":"OverTime = Yes","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"13","3":"No","4":"0.5155908","5":"0.4163925","6":"0.82262013","7":"0.6767383","8":"NumCompaniesWorked","9":"7","10":"-0.09932109","11":"4 < NumCompaniesWorked","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"13","3":"No","4":"0.5155908","5":"0.4163925","6":"0.82262013","7":"0.6767383","8":"JobLevel","9":"2","10":"0.09784126","11":"JobLevel = 2","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"13","3":"No","4":"0.5155908","5":"0.4163925","6":"0.82262013","7":"0.6767383","8":"JobSatisfaction","9":"4","10":"0.07263019","11":"JobSatisfaction = Very High","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"13","3":"No","4":"0.5155908","5":"0.4163925","6":"0.82262013","7":"0.6767383","8":"DistanceFromHome","9":"23","10":"-0.07026541","11":"14 < DistanceFromHome","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"13","3":"No","4":"0.5155908","5":"0.4163925","6":"0.82262013","7":"0.6767383","8":"StockOptionLevel","9":"2","10":"0.06531835","11":"StockOptionLevel = 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"13","3":"No","4":"0.5155908","5":"0.4163925","6":"0.82262013","7":"0.6767383","8":"Age","9":"26","10":"-0.06221651","11":"Age <= 30","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"13","3":"No","4":"0.5155908","5":"0.4163925","6":"0.82262013","7":"0.6767383","8":"YearsSinceLastPromotion","9":"0","10":"0.05833430","11":"YearsSinceLastPromotion <= 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"14","3":"No","4":"0.8111831","5":"0.4296233","6":"0.95444701","7":"0.4403987","8":"OverTime","9":"2","10":"-0.21474048","11":"OverTime = Yes","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"14","3":"No","4":"0.8111831","5":"0.4296233","6":"0.95444701","7":"0.4403987","8":"YearsAtCompany","9":"15","10":"-0.11569825","11":"10 < YearsAtCompany","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"14","3":"No","4":"0.8111831","5":"0.4296233","6":"0.95444701","7":"0.4403987","8":"BusinessTravel","9":"3","10":"-0.09359414","11":"BusinessTravel = Travel_Frequently","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"14","3":"No","4":"0.8111831","5":"0.4296233","6":"0.95444701","7":"0.4403987","8":"StockOptionLevel","9":"1","10":"-0.08641684","11":"StockOptionLevel = 0","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"14","3":"No","4":"0.8111831","5":"0.4296233","6":"0.95444701","7":"0.4403987","8":"YearsInCurrentRole","9":"14","10":"0.08735094","11":"7 < YearsInCurrentRole","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"14","3":"No","4":"0.8111831","5":"0.4296233","6":"0.95444701","7":"0.4403987","8":"YearsSinceLastPromotion","9":"8","10":"-0.08187119","11":"3 < YearsSinceLastPromotion","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"14","3":"No","4":"0.8111831","5":"0.4296233","6":"0.95444701","7":"0.4403987","8":"EnvironmentSatisfaction","9":"1","10":"-0.07409148","11":"EnvironmentSatisfaction = Low","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"14","3":"No","4":"0.8111831","5":"0.4296233","6":"0.95444701","7":"0.4403987","8":"NumCompaniesWorked","9":"1","10":"0.06501314","11":"NumCompaniesWorked <= 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"15","3":"No","4":"0.9980786","5":"0.3305920","6":"0.54029023","7":"1.1417748","8":"OverTime","9":"1","10":"0.20200736","11":"OverTime = No","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"15","3":"No","4":"0.9980786","5":"0.3305920","6":"0.54029023","7":"1.1417748","8":"JobLevel","9":"2","10":"0.09445341","11":"JobLevel = 2","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"15","3":"No","4":"0.9980786","5":"0.3305920","6":"0.54029023","7":"1.1417748","8":"YearsSinceLastPromotion","9":"0","10":"0.05566868","11":"YearsSinceLastPromotion <= 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"15","3":"No","4":"0.9980786","5":"0.3305920","6":"0.54029023","7":"1.1417748","8":"StockOptionLevel","9":"3","10":"0.05828442","11":"StockOptionLevel = 2","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"15","3":"No","4":"0.9980786","5":"0.3305920","6":"0.54029023","7":"1.1417748","8":"NumCompaniesWorked","9":"1","10":"0.05499099","11":"NumCompaniesWorked <= 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"15","3":"No","4":"0.9980786","5":"0.3305920","6":"0.54029023","7":"1.1417748","8":"YearsWithCurrManager","9":"9","10":"0.04837511","11":"7 < YearsWithCurrManager","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"15","3":"No","4":"0.9980786","5":"0.3305920","6":"0.54029023","7":"1.1417748","8":"JobRole","9":"7","10":"0.04503192","11":"JobRole = Research Scientist","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"15","3":"No","4":"0.9980786","5":"0.3305920","6":"0.54029023","7":"1.1417748","8":"JobInvolvement","9":"3","10":"0.04267264","11":"JobInvolvement = High","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"16","3":"No","4":"0.7898934","5":"0.3444213","6":"0.87110902","7":"0.6744854","8":"OverTime","9":"2","10":"-0.20187033","11":"OverTime = Yes","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"16","3":"No","4":"0.7898934","5":"0.3444213","6":"0.87110902","7":"0.6744854","8":"StockOptionLevel","9":"1","10":"-0.09333835","11":"StockOptionLevel = 0","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"16","3":"No","4":"0.7898934","5":"0.3444213","6":"0.87110902","7":"0.6744854","8":"JobSatisfaction","9":"1","10":"-0.07121902","11":"JobSatisfaction = Low","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"16","3":"No","4":"0.7898934","5":"0.3444213","6":"0.87110902","7":"0.6744854","8":"Age","9":"45","10":"0.07021553","11":"43 < Age","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"16","3":"No","4":"0.7898934","5":"0.3444213","6":"0.87110902","7":"0.6744854","8":"YearsSinceLastPromotion","9":"0","10":"0.05271179","11":"YearsSinceLastPromotion <= 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"16","3":"No","4":"0.7898934","5":"0.3444213","6":"0.87110902","7":"0.6744854","8":"YearsInCurrentRole","9":"0","10":"-0.05191466","11":"YearsInCurrentRole <= 2","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"16","3":"No","4":"0.7898934","5":"0.3444213","6":"0.87110902","7":"0.6744854","8":"JobInvolvement","9":"3","10":"0.04904735","11":"JobInvolvement = High","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"16","3":"No","4":"0.7898934","5":"0.3444213","6":"0.87110902","7":"0.6744854","8":"YearsAtCompany","9":"0","10":"0.04974411","11":"YearsAtCompany <= 3","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"17","3":"No","4":"0.9335345","5":"0.4285224","6":"0.68628822","7":"0.8047955","8":"OverTime","9":"1","10":"0.20903832","11":"OverTime = No","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"17","3":"No","4":"0.9335345","5":"0.4285224","6":"0.68628822","7":"0.8047955","8":"YearsAtCompany","9":"11","10":"-0.12010773","11":"10 < YearsAtCompany","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"17","3":"No","4":"0.9335345","5":"0.4285224","6":"0.68628822","7":"0.8047955","8":"JobLevel","9":"2","10":"0.09986403","11":"JobLevel = 2","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"17","3":"No","4":"0.9335345","5":"0.4285224","6":"0.68628822","7":"0.8047955","8":"YearsInCurrentRole","9":"8","10":"0.08957454","11":"7 < YearsInCurrentRole","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"17","3":"No","4":"0.9335345","5":"0.4285224","6":"0.68628822","7":"0.8047955","8":"YearsSinceLastPromotion","9":"5","10":"-0.08417692","11":"3 < YearsSinceLastPromotion","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"17","3":"No","4":"0.9335345","5":"0.4285224","6":"0.68628822","7":"0.8047955","8":"StockOptionLevel","9":"1","10":"-0.07341186","11":"StockOptionLevel = 0","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"17","3":"No","4":"0.9335345","5":"0.4285224","6":"0.68628822","7":"0.8047955","8":"RelationshipSatisfaction","9":"1","10":"-0.05473915","11":"RelationshipSatisfaction = Low","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"17","3":"No","4":"0.9335345","5":"0.4285224","6":"0.68628822","7":"0.8047955","8":"NumCompaniesWorked","9":"1","10":"0.05246605","11":"NumCompaniesWorked <= 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"18","3":"No","4":"0.8839093","5":"0.3643932","6":"0.71043762","7":"0.7981583","8":"OverTime","9":"1","10":"0.21206769","11":"OverTime = No","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"18","3":"No","4":"0.8839093","5":"0.3643932","6":"0.71043762","7":"0.7981583","8":"StockOptionLevel","9":"1","10":"-0.08859287","11":"StockOptionLevel = 0","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"18","3":"No","4":"0.8839093","5":"0.3643932","6":"0.71043762","7":"0.7981583","8":"JobLevel","9":"1","10":"-0.07970014","11":"JobLevel = 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"18","3":"No","4":"0.8839093","5":"0.3643932","6":"0.71043762","7":"0.7981583","8":"JobSatisfaction","9":"1","10":"-0.06414313","11":"JobSatisfaction = Low","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"18","3":"No","4":"0.8839093","5":"0.3643932","6":"0.71043762","7":"0.7981583","8":"NumCompaniesWorked","9":"1","10":"0.06005260","11":"NumCompaniesWorked <= 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"18","3":"No","4":"0.8839093","5":"0.3643932","6":"0.71043762","7":"0.7981583","8":"YearsInCurrentRole","9":"0","10":"-0.05585853","11":"YearsInCurrentRole <= 2","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"18","3":"No","4":"0.8839093","5":"0.3643932","6":"0.71043762","7":"0.7981583","8":"YearsSinceLastPromotion","9":"0","10":"0.05395877","11":"YearsSinceLastPromotion <= 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"18","3":"No","4":"0.8839093","5":"0.3643932","6":"0.71043762","7":"0.7981583","8":"JobRole","9":"7","10":"0.04993630","11":"JobRole = Research Scientist","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"19","3":"No","4":"0.8212264","5":"0.3688546","6":"0.90810151","7":"0.5602393","8":"OverTime","9":"2","10":"-0.20704899","11":"OverTime = Yes","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"19","3":"No","4":"0.8212264","5":"0.3688546","6":"0.90810151","7":"0.5602393","8":"BusinessTravel","9":"3","10":"-0.09831709","11":"BusinessTravel = Travel_Frequently","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"19","3":"No","4":"0.8212264","5":"0.3688546","6":"0.90810151","7":"0.5602393","8":"StockOptionLevel","9":"1","10":"-0.08082649","11":"StockOptionLevel = 0","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"19","3":"No","4":"0.8212264","5":"0.3688546","6":"0.90810151","7":"0.5602393","8":"EnvironmentSatisfaction","9":"1","10":"-0.08399290","11":"EnvironmentSatisfaction = Low","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"19","3":"No","4":"0.8212264","5":"0.3688546","6":"0.90810151","7":"0.5602393","8":"Age","9":"50","10":"0.06288075","11":"43 < Age","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"19","3":"No","4":"0.8212264","5":"0.3688546","6":"0.90810151","7":"0.5602393","8":"YearsSinceLastPromotion","9":"0","10":"0.05716472","11":"YearsSinceLastPromotion <= 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"19","3":"No","4":"0.8212264","5":"0.3688546","6":"0.90810151","7":"0.5602393","8":"MonthlyIncome","9":"18172","10":"0.05070321","11":"8189 < MonthlyIncome","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"19","3":"No","4":"0.8212264","5":"0.3688546","6":"0.90810151","7":"0.5602393","8":"RelationshipSatisfaction","9":"1","10":"-0.04842538","11":"RelationshipSatisfaction = Low","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"20","3":"No","4":"0.9752803","5":"0.3413336","6":"0.70993774","7":"0.8479173","8":"OverTime","9":"1","10":"0.20974588","11":"OverTime = No","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"20","3":"No","4":"0.9752803","5":"0.3413336","6":"0.70993774","7":"0.8479173","8":"JobLevel","9":"1","10":"-0.07715233","11":"JobLevel = 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"20","3":"No","4":"0.9752803","5":"0.3413336","6":"0.70993774","7":"0.8479173","8":"Age","9":"25","10":"-0.06401433","11":"Age <= 30","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"20","3":"No","4":"0.9752803","5":"0.3413336","6":"0.70993774","7":"0.8479173","8":"JobSatisfaction","9":"4","10":"0.05345205","11":"JobSatisfaction = Very High","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"20","3":"No","4":"0.9752803","5":"0.3413336","6":"0.70993774","7":"0.8479173","8":"NumCompaniesWorked","9":"1","10":"0.05665497","11":"NumCompaniesWorked <= 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"20","3":"No","4":"0.9752803","5":"0.3413336","6":"0.70993774","7":"0.8479173","8":"JobRole","9":"7","10":"0.05467225","11":"JobRole = Research Scientist","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"20","3":"No","4":"0.9752803","5":"0.3413336","6":"0.70993774","7":"0.8479173","8":"YearsInCurrentRole","9":"2","10":"-0.05215068","11":"YearsInCurrentRole <= 2","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"20","3":"No","4":"0.9752803","5":"0.3413336","6":"0.70993774","7":"0.8479173","8":"JobInvolvement","9":"2","10":"-0.04322829","11":"JobInvolvement = Medium","12":"<named list [31]>","13":"<named list [2]>"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1"></a>g2 <span class="ot">&lt;-</span> <span class="fu">plot_explanations</span>(explanation)</span>
<span id="cb26-2"><a href="#cb26-2"></a>g2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="06_LIME_files/figure-html/unnamed-chunk-8-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3"><img src="06_LIME_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a>explanation <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes_</span>(<span class="sc">~</span>(case), <span class="sc">~</span>feature_desc)) <span class="sc">+</span></span>
<span id="cb27-2"><a href="#cb27-2"></a>  <span class="fu">geom_tile</span>(<span class="fu">aes_</span>(<span class="at">fill =</span> <span class="sc">~</span>feature_weight)) <span class="sc">+</span></span>
<span id="cb27-3"><a href="#cb27-3"></a>  <span class="fu">scale_x_discrete</span>(<span class="st">"Case"</span>, <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb27-4"><a href="#cb27-4"></a>  <span class="fu">scale_y_discrete</span>(<span class="st">"Feature"</span>, <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb27-5"><a href="#cb27-5"></a>  <span class="fu">scale_fill_gradient2</span>(<span class="st">"Feature</span><span class="sc">\n</span><span class="st">weight"</span>, <span class="at">low =</span> <span class="st">"firebrick"</span>, <span class="at">mid =</span> <span class="st">"white"</span>, <span class="at">high =</span> <span class="st">"steelblue"</span>) <span class="sc">+</span></span>
<span id="cb27-6"><a href="#cb27-6"></a>  <span class="fu">theme</span>(<span class="at">panel.border =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="cn">NA</span>,</span>
<span id="cb27-7"><a href="#cb27-7"></a>                                    <span class="at">size =</span> <span class="dv">1</span>),</span>
<span id="cb27-8"><a href="#cb27-8"></a>        <span class="at">panel.grid =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb27-9"><a href="#cb27-9"></a>        <span class="at">legend.position =</span> <span class="st">"right"</span>,</span>
<span id="cb27-10"><a href="#cb27-10"></a>        <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>, <span class="at">vjust =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb27-11"><a href="#cb27-11"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>label) <span class="sc">+</span> <span class="fu">theme_light</span>() <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">panel.grid.major =</span> <span class="fu">element_blank</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="06_LIME_files/figure-html/unnamed-chunk-8-2.png" class="lightbox" data-gallery="quarto-lightbox-gallery-4"><img src="06_LIME_files/figure-html/unnamed-chunk-8-2.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>


</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'alternate';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","loop":true,"selector":".lightbox","openEffect":"zoom","descPosition":"bottom"});</script>


</body></html>